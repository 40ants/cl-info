{"name":"CI","on":{"push":{"branches":["workflow-generator","main","master"]},"pull_request":null,"schedule":[{"cron":"0 10 * * 1"}]},"jobs":{"linter":{"runs-on":"ubuntu-latest","env":{"LISP":"sbcl-bin"},"steps":[{"uses":"actions/checkout@v1"},{"uses":"40ants/setup-lisp@v1","with":{"asdf-system":"cl-info"}},{"name":"Install SBLint","run":"qlot exec ros install cxxxr/sblint\n"},{"name":"Run Linter","run":"qlot exec sblint cl-info.asd cl-info-test.asd\n"}]},"tests":{"runs-on":"${{ matrix.os }}","strategy":{"fail-fast":null,"matrix":{"os":["ubuntu-latest","macos-latest"],"quicklisp-dist":["quicklisp","ultralisp"],"lisp":["sbcl-bin","ccl-bin","ecl","abcl","allegro","clisp","cmucl"],"exclude":[{"os":"macos-latest","lisp":"allegro"},{"os":"macos-latest","lisp":"clisp","quicklisp-dist":"ultralisp"},{"os":"macos-latest","lisp":"cmucl"},{"os":"ubuntu-latest","lisp":"clisp"},{"os":"ubuntu-latest","lisp":"allegro"},{"os":"ubuntu-latest","lisp":"cmucl"}]}},"env":{"LISP":"${{ matrix.lisp }}","OS":"${{ matrix.os }}","QUICKLISP_DIST":"${{ matrix.quicklisp-dist }}"},"steps":[{"uses":"actions/checkout@v1"},{"name":"Grant All Perms to Make Cache Restoring Possible","run":"sudo mkdir -p /usr/local/etc/roswell\nsudo chown \"${USER}\" /usr/local/etc/roswell\n# Here the ros binary will be restored:\nsudo chown \"${USER}\" /usr/local/bin\n"},{"name":"Get Current Month","id":"current-month","run":"echo \"::set-output name=value::$(date -u \"+%Y-%m\")\"\n"},{"name":"Cache Roswell Setup","id":"cache","uses":"actions/cache@v2","env":{"cache-name":"cache-roswell"},"with":{"path":"qlfile\nqlfile.lock\n/usr/local/bin/ros\n~/.cache/common-lisp/\n~/.roswell\n/usr/local/etc/roswell\n.qlot\n","key":"${{ steps.current-month.outputs.value }}-${{ env.cache-name }}-${{ matrix.os }}-${{ matrix.quicklisp-dist }}-${{ matrix.lisp }}-${{ hashFiles('qlfile.lock') }}"}},{"name":"Restore Path To Cached Files","run":"echo $HOME/.roswell/bin >> $GITHUB_PATH\necho .qlot/bin >> $GITHUB_PATH\n","if":"steps.cache.outputs.cache-hit == 'true'"},{"uses":"40ants/setup-lisp@v1","with":{"asdf-system":"cl-info","qlfile-template":"{% ifequal quicklisp_dist \"ultralisp\" %}\ndist ultralisp http://dist.ultralisp.org\n{% endifequal %}\n\ngithub mgl-pax svetlyak40wt/mgl-pax :branch mgl-pax-minimal\n"},"if":"steps.cache.outputs.cache-hit != 'true'"},{"name":"Check Roswell setup","run":"ros config"},{"uses":"40ants/run-tests@v2","with":{"asdf-system":"cl-info","coveralls-token":"${{ matrix.lisp == 'sbcl-bin' &&\n    matrix.os == 'ubuntu-latest' &&\n    matrix.quicklisp-dist == 'ultralisp' &&\n    secrets.github_token }}\n"}},{"name":"Run Command Line Version","run":"\necho ::group::Help Argument\nqlot exec cl-info --help\necho ::endgroup::\n\necho ::group::Version Argument\nqlot exec cl-info --version\necho ::endgroup::\n\necho ::group::Lisp Systems Info\nqlot exec cl-info cl-info defmain\necho ::endgroup::\n"}]}}}